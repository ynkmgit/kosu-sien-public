{% extends "base.html" %}
{% from 'macros/page_header.html' import page_header %}
{% from 'macros/forms.html' import loading_row, form_card_header, add_button %}
{% block title %}{{ attr_type.name }} - 選択肢管理{% endblock %}
{% block content %}
{{ page_header(
    title=attr_type.name ~ ' - 選択肢管理',
    icon='M4 6h16M4 10h16M4 14h16M4 18h16',
    breadcrumbs=[
        {'label': 'ホーム', 'href': '/'},
        {'label': 'ユーザー属性タイプ', 'href': '/user-attribute-types'},
        {'label': attr_type.name ~ ' - 選択肢'}
    ]
) }}

<div class="form-card">
    {{ form_card_header('新規選択肢追加') }}
    <form class="add-form" hx-post="/user-attribute-types/{{ attr_type.id }}/options" hx-target="#attr-option-table tbody" hx-swap="beforeend" hx-on::after-request="this.reset()">
        <div class="form-group">
            <label class="form-label">コード</label>
            <input type="text" name="code" placeholder="employee" required class="form-input input-code">
        </div>
        <div class="form-group">
            <label class="form-label">表示名</label>
            <input type="text" name="name" placeholder="社員" required class="form-input">
        </div>
        <div class="form-group">
            <label class="form-label">並び順</label>
            <input type="number" name="sort_order" value="0" class="form-input input-sort" step="1" min="0">
        </div>
        {{ add_button() }}
    </form>
</div>

<div class="table-card">
    <div class="table-header">
        <span class="table-title">登録済み選択肢</span>
    </div>
    <table id="attr-option-table" hx-get="/user-attribute-types/{{ attr_type.id }}/options/list" hx-trigger="load" hx-swap="innerHTML">
        <thead>
            <tr>
                <th class="col-code">コード</th>
                <th>表示名</th>
                <th class="col-sort">並び順</th>
                <th class="col-actions-lg">操作</th>
            </tr>
        </thead>
        <tbody>
            {{ loading_row(4) }}
        </tbody>
    </table>
</div>

<div style="margin-top: 24px;">
    <a href="/user-attribute-types" class="btn btn-ghost">← 属性タイプ一覧に戻る</a>
</div>
{% endblock %}
